<!DOCTYPE html>
<!-- 폼없이 데이터 주고 받을 html 파일 폼완성은 2에서 할께요 여기서 연습해주세요 -->
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">

<!-- include libraries(jQuery, bootstrap) -->
<link
	href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
	rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script
	src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<link rel="stylesheet" th:href="@{/css/foodread.css}">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
	integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
	crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="short icon" th:href="@{/image/food/short_icon.png}">

<!-- include summernote css/js -->
<link
	href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css"
	rel="stylesheet">
<script
	src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
<script>
function deletezzim(n){
	if (confirm('삭제하시겠습니까?')){
	location.href='deletezzim?num=' + n;
	// http://localhost:8884/spring5/board/delete?num=1
	}
}

function pdfDownload(){
	let zzim_name = $('#zzim_name').html();
    $.ajax({
        url : 'pdfzzim',
        type: 'get',
        data:{
        	zzim_name: zzim_name
        	},
        success:function(result){
            alert("성공");
         },
         error:function(result){
            alert("다운로드에 실패하였습니다.");        
         }
     });
}
</script>
<title>myRecipe</title>

</head>
<body>
	<section id="Home">

        <nav>

            <div class="logo">
                <a th:href="@{/}"> <img th:src="@{/image/food/로고0328_3.svg}"></a>
            </div>

            <ul>
                <li><a th:href="@{/}"> 레시피 추천</a></li>
                <li><a th:href="@{/recipe/list}">모든 레시피보기</a></li>
                <!-- 아래부터는 로그인 해야 이용 가능한 설정 클릭시 로그인한 사람이 아니면 로그인 페이지로 접근 막음  -->
                <!-- 로그인을 3개페이지 이용가능  접근허용 이렇게 할려면 홈에 컨크롤러가 있으면 안되고 아래 3개는 각각의 컨트롤러에 있어서 아이디 채크후 가야할꺼같음-->
                <!-- 구현이 까다로울꺼같은면 발표 전에 로그인 먼저 한다고 말하고 보여주는 방법이 있으면-->
                
                <li><a th:href="@{/recipe/write}">레시피 쓰기</a></li>
                <li><a th:href="@{/recipe/listzzim}">내 찜목록</a></li>
                <li><a th:href="@{/user/mypage}">마이페이지</a></li>
            </ul>

            <div class="login">
                <span sec:authorize="not isAuthenticated()" ><a th:href="@{/user/loginForm}">로그인</a></span>
                <span sec:authorize="isAuthenticated()" ><a th:href="@{/user/logout}">로그아웃</a></span>
            </div>

        </nav>

    </section>
	<header>
		<h1>[찜한 레시핏 보기]</h1>
	</header>

	<section>
		<form id="readZzim" th:action="@{/recipe/readzzim}" method="post">

			<table>		
				<tr>
					<!-- 화면에 바로뜸.  -->
					<img th:src="@{/recipe/downloadzzim(num=${Zzim.zzim_num})}">
					<!-- 이렇게 하는 경우도 있고, 저장 장소를 static에 해서 누구든지 볼수 있게 할수도 있다고함....있다고함..  -->
					</td>
				</tr>

				<tr>
					<th>요리 이름</th>
					<td th:text="${Zzim.zzim_name}" id="zzim_name"></td>
				</tr>
				<tr>
					<th>레시피 분류</th>
					<td th:text="${Zzim.zzim_type}"></td>
				</tr>
				<tr>
					<th>레시피 아이콘</th>
					<td th:text="${Zzim.zzim_icon}"></td>
				</tr>
				<tr>
					<th>찜한 날짜</th>
					<td th:text="${Zzim.zzim_date}"></td>
				</tr>
				<tr>
					<th>재료</th>
					<td th:text="${Zzim.zzim_need}"></td>
				</tr>
				<tr>
					<th>요리 소개</th>
					<td th:utext="${Zzim.zzim_howto}"></td>
				</tr>
				<p>
				<tr>
				<a th:href="@{/recipe/updatezzim(num=${Zzim.zzim_num})}">레시피 편집</a>
				</tr>
				<p>
				<tr>
				<a th:href="|javascript:deletezzim(${Zzim.zzim_num})|" >삭제</a>
				</tr>
				<p>
				<tr>
				<input type="button" id="pdf" onclick="pdfDownload();" value="PDF">
				 <a th:href="@{/recipe/pdfzzim}">PDF파일로 변환</a>
				 <!--  <a th:href="@{/recipe/pdfzzim(num=${Zzim.zzim_num})}">PDF파일로 변환</a> -->
				</tr>
			</table>
		</form>

	</section>
</body>
</html>
